<!-- ========================================================
  TSUNAGARU PORTAL - イベントリスト
  WordPress カスタムHTMLブロックにそのまま貼り付けてください
  ======================================================== -->

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@200;300;400&family=Noto+Sans+JP:wght@200;300;400&display=swap" rel="stylesheet">

<!-- スタイル -->
<style>
  :root {
    --ink: #1d1d1f;
    --paper: transparent;
    --bg: #f5f5f7;
    --muted: #1d1d1f;
    --rule: #d2d2d7;
    --warm: #b8845a;
    --accent: #6e4a30;
    --green: #4a7259;
  }


  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { font-size: 16px; }


  body {
    background: transparent;
    color: var(--ink);
    font-family: 'Noto Sans JP', sans-serif;
    font-weight: 200;
    line-height: 2;
    -webkit-font-smoothing: antialiased;
  }


  /* ───── ヘッダー ───── */
  header {
    background: var(--ink);
    padding: 1.6rem 4rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    z-index: 200;
  }


  .logo {
    text-decoration: none;
    font-family: 'Noto Serif JP', serif;
    font-weight: 300;
    font-size: 1rem;
    color: #f5f5f7;
    letter-spacing: 0.22em;
  }


  .header-nav { display: flex; gap: 2rem; align-items: center; }


  .header-nav a {
    font-size: 0.72rem;
    color: #a1a1a6;
    text-decoration: none;
    letter-spacing: 0.16em;
    border-bottom: 1px solid #3a3a3c;
    padding-bottom: 1px;
    transition: color 0.2s, border-color 0.2s;
  }
  .header-nav a:hover { color: var(--warm); border-color: var(--warm); }


  /* ───── ページタイトル ───── */
  .page-title {
    max-width: 1200px;
    margin: 0 auto;
    padding: 5rem 4rem 3.5rem;
    border-bottom: 1px solid var(--rule);
  }


  .page-label {
    font-size: 0.65rem;
    letter-spacing: 0.28em;
    color: var(--muted);
    text-transform: uppercase;
    margin-bottom: 1.4rem;
  }


  .page-title h1 {
    font-family: 'Noto Serif JP', serif;
    font-weight: 200;
    font-size: 1.9rem;
    line-height: 1.7;
    letter-spacing: 0.1em;
    margin-bottom: 1.2rem;
    color: var(--ink);
  }


  .page-desc {
    font-size: 0.88rem;
    color: var(--muted);
    font-weight: 300;
    line-height: 2;
    letter-spacing: 0.04em;
    max-width: 520px;
  }


  /* ───── メインレイアウト ───── */
  .main-layout {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 4rem 6rem;
    display: grid;
    grid-template-columns: 1fr 220px;
    gap: 0 4rem;
    align-items: start;
  }


  /* ───── 左カラム（フィルター＋リスト） ───── */
  .left-col {}


  /* ───── フィルターバー ───── */
  .filter-bar {
    padding: 2rem 0 1.5rem;
    border-bottom: 1px solid var(--rule);
  }


  .filter-row {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: center;
    margin-bottom: 0.8rem;
  }
  .filter-row:last-child { margin-bottom: 0; }


  .filter-row-label {
    font-size: 0.6rem;
    letter-spacing: 0.2em;
    color: var(--muted);
    width: 4rem;
    flex-shrink: 0;
  }


  .filter-btn {
    background: none;
    border: 1px solid var(--rule);
    color: var(--muted);
    padding: 0.28rem 0.9rem;
    font-size: 0.68rem;
    font-weight: 300;
    cursor: pointer;
    letter-spacing: 0.08em;
    transition: all 0.2s;
    border-radius: 0;
  }
  .filter-btn:hover { border-color: var(--ink); color: var(--ink); }
  .filter-btn.active { background: var(--ink); border-color: var(--ink); color: #f5f5f7; }


  /* 都道府県セレクト */
  .pref-select {
    border: 1px solid var(--rule);
    background: transparent;
    color: var(--ink);
    font-size: 0.68rem;
    font-weight: 300;
    padding: 0.28rem 1.8rem 0.28rem 0.7rem;
    outline: none;
    cursor: pointer;
    transition: border-color 0.2s;
    letter-spacing: 0.06em;
    appearance: none;
    -webkit-appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%236e6e73'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.6rem center;
  }
  .pref-select:focus { border-color: var(--ink); }
  .date-search {
    padding: 1.4rem 0;
    border-bottom: 1px solid var(--rule);
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
  }


  .date-search-label {
    font-size: 0.65rem;
    letter-spacing: 0.18em;
    color: var(--muted);
    white-space: nowrap;
  }


  .date-input-wrap {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
  }


  .date-input {
    border: 1px solid var(--rule);
    background: var(--paper);
    color: var(--ink);
    font-size: 0.75rem;
    font-weight: 300;
    padding: 0.3rem 0.7rem;
    outline: none;
    transition: border-color 0.2s;
    width: 130px;
  }
  .date-input:focus { border-color: var(--ink); }


  .date-sep {
    font-size: 0.7rem;
    color: var(--muted);
  }


  .date-clear-btn {
    background: none;
    border: none;
    font-size: 0.68rem;
    color: var(--muted);
    cursor: pointer;
    letter-spacing: 0.1em;
    font-weight: 300;
    padding: 0;
    transition: color 0.2s;
  }
  .date-clear-btn:hover { color: var(--warm); }


  /* ───── イベント一覧 ───── */
  .events-list { padding-bottom: 2rem; }


  .no-results {
    padding: 4rem 0;
    color: var(--muted);
    font-size: 0.82rem;
    letter-spacing: 0.1em;
    text-align: center;
    border-bottom: 1px solid var(--rule);
  }


  .event-row {
    display: grid;
    grid-template-columns: 1fr 300px;
    gap: 0 3rem;
    padding: 2.8rem 0;
    border-bottom: 1px solid var(--rule);
    align-items: start;
  }


  /* サムネイル */
  .ev-thumbnail-wrap {
    width: 100%;
    aspect-ratio: 4 / 3;
    overflow: hidden;
    background: #e8e8ea;
  }
  .ev-thumbnail-wrap img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }


  .ev-date-body {
    font-size: 0.72rem;
    color: var(--muted);
    letter-spacing: 0.08em;
    font-weight: 300;
    margin-bottom: 0.8rem;
  }


  .ev-body {}


  .ev-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    margin-bottom: 0.8rem;
  }


  .tag {
    font-size: 0.67rem;
    font-weight: 300;
    letter-spacing: 0.1em;
    padding: 0.18rem 0.7rem;
    border: 1px solid;
  }


  .tag-free      { border-color: #c8a060; color: #7a4e10; background: #fdf8ee; }
  .tag-online    { border-color: #7ab898; color: #2d6b4a; background: #f0faf5; }
  .tag-offline   { border-color: #c49070; color: #6e3e1e; background: #fdf6f0; }
  .tag-supporter { border-color: #7090b8; color: #1e3e68; background: #f0f4fa; }
  .tag-person    { border-color: #a090c0; color: #4a3068; background: #f6f2fc; }
  .tag-forum     { border-color: #90b890; color: #2a5a2a; background: #f2faf2; }
  .tag-toujisya  { border-color: #c07878; color: #6a2020; background: #fdf2f2; }
  .tag-press     { border-color: #9090b8; color: #30306a; background: #f4f4fc; }


  .tag-side-機能不全家族 { border-color: #b0a0c0; color: #4a3060; background: #f8f4fc; }
  .tag-side-ヤングケアラー { border-color: #80b890; color: #1e5a30; background: #f0faf4; }
  .tag-side-アダルトチルドレン { border-color: #c0a080; color: #604020; background: #fdf6ee; }
  .tag-side-きょうだい児 { border-color: #90a8c0; color: #203858; background: #f0f6fc; }
  .tag-side-虐待 { border-color: #c08080; color: #6a1a1a; background: #fdf0f0; }
  .tag-side-ACE { border-color: #a0a0c0; color: #303060; background: #f4f4fc; }
  .tag-side-宗教2世 { border-color: #c0b080; color: #604010; background: #fdf8e8; }
  .tag-side-障害 { border-color: #80b0c0; color: #1e4858; background: #f0f8fc; }
  .tag-side-社会的養護 { border-color: #b0c090; color: #3a5020; background: #f4f8ee; }
  .tag-side-里親 { border-color: #c0a8b0; color: #603040; background: #fdf4f6; }
  .tag-pref { border-color: #909090; color: #3a3a3a; background: #f5f5f5; letter-spacing: 0.06em; }


  .ev-title {
    font-family: 'Noto Serif JP', serif;
    font-weight: 300;
    font-size: 1.18rem;
    line-height: 1.7;
    letter-spacing: 0.05em;
    margin-bottom: 0.8rem;
    color: var(--ink);
  }


  .ev-title a {
    color: inherit;
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color 0.2s;
  }
  .ev-title a:hover { border-color: var(--warm); }


  .ev-desc {
    font-size: 0.83rem;
    color: var(--muted);
    line-height: 2;
    letter-spacing: 0.03em;
    margin-bottom: 1.2rem;
    max-width: 540px;
    font-weight: 300;
  }


  .ev-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem 1.8rem;
    font-size: 0.76rem;
    color: var(--muted);
    letter-spacing: 0.05em;
    font-weight: 300;
  }


  .ev-meta span { display: flex; align-items: center; gap: 0.4rem; }
  .ev-meta svg { opacity: 0.55; flex-shrink: 0; }


  /* 詳細リンク */
  .ev-detail-link {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.72rem;
    color: var(--ink);
    text-decoration: none;
    letter-spacing: 0.12em;
    border-bottom: 1px solid var(--rule);
    padding-bottom: 1px;
    margin-top: 1rem;
    transition: border-color 0.2s, color 0.2s;
  }
  .ev-detail-link:hover { border-color: var(--warm); color: var(--warm); }


  /* もっと見る */
  .load-more-wrap {
    text-align: center;
    padding: 2.8rem 0 0.5rem;
  }
  .load-more-btn {
    background: none;
    border: 1px solid var(--rule);
    color: var(--ink);
    font-size: 0.76rem;
    font-weight: 300;
    letter-spacing: 0.2em;
    padding: 0.9rem 3.2rem;
    cursor: pointer;
    transition: all 0.2s;
  }
  .load-more-btn:hover { border-color: var(--ink); background: var(--ink); color: #f5f5f7; }


  /* ───── 右カラム（サイドカテゴリ） ───── */
  .right-col {
    padding-top: 3.5rem;
    position: sticky;
    top: 80px;
  }


  .side-section {
    margin-bottom: 2.4rem;
  }


  .side-label {
    font-size: 0.6rem;
    letter-spacing: 0.22em;
    color: var(--muted);
    text-transform: uppercase;
    margin-bottom: 0.6rem;
    padding-bottom: 0;
  }


  .side-btn {
    display: block;
    width: 100%;
    text-align: left;
    background: none;
    border: none;
    color: var(--muted);
    font-size: 0.76rem;
    font-weight: 300;
    letter-spacing: 0.08em;
    padding: 0.4rem 0;
    cursor: pointer;
    border-bottom: 1px solid transparent;
    transition: color 0.2s, border-color 0.2s;
    line-height: 1.6;
  }
  .side-btn:hover { color: var(--ink); }
  .side-btn.active { color: var(--ink); font-weight: 400; border-bottom-color: var(--warm); }


  /* ───── レスポンシブ ───── */
  @media (max-width: 820px) {
    .main-layout {
      display: flex;
      flex-direction: column;
      padding: 0 1.8rem 4rem;
    }
    .left-col { display: contents; }
    .filter-bar-wrap { order: 0; }
    .right-col {
      order: 1;
      position: static;
      padding-top: 0;
      margin-top: 1.2rem;
      margin-bottom: 0.4rem;
    }
    .side-label { margin-bottom: 0.6rem; }
    .side-btn {
      display: inline-block;
      width: auto;
      border: 1px solid var(--rule);
      padding: 0.25rem 0.8rem;
      margin: 0.2rem 0.2rem 0 0;
      font-size: 0.68rem;
      border-bottom: none;
    }
    .side-btn.active {
      background: var(--ink);
      color: #f5f5f7;
      border-color: var(--ink);
    }
    .events-list-wrap { order: 2; }
    .event-row { grid-template-columns: 1fr; }
    .ev-body { order: 1; }
    .ev-thumbnail-wrap { order: 2; width: 100%; margin-top: 1.2rem; }
  }
</style>
</style>

<!-- HTML -->




<div class="main-layout">


  <!-- 左カラム -->
  <div class="left-col">


    <div class="filter-bar-wrap">
    <!-- フィルターバー -->
    <div class="filter-bar">
      <div class="filter-row">
        <span class="filter-row-label">カテゴリ</span>
        <button class="filter-btn active" data-filter="all" onclick="setMainFilter('all', this)">すべて</button>
        <button class="filter-btn" data-filter="free" onclick="setMainFilter('free', this)">無料</button>
        <button class="filter-btn" data-filter="online" onclick="setMainFilter('online', this)">オンライン</button>
        <button class="filter-btn" data-filter="offline" onclick="setMainFilter('offline', this)">会場参加</button>
        <button class="filter-btn" data-filter="supporter" onclick="setMainFilter('supporter', this)">支援者向け</button>
        <button class="filter-btn" data-filter="person" onclick="setMainFilter('person', this)">当事者向け</button>
        <button class="filter-btn" data-filter="forum" onclick="setMainFilter('forum', this)">フォーラム</button>
        <button class="filter-btn" data-filter="toujisya" onclick="setMainFilter('toujisya', this)">当事者会</button>
        <button class="filter-btn" data-filter="crowd" onclick="setMainFilter('crowd', this)">クラウドファンディング</button>
        <button class="filter-btn" data-filter="press" onclick="setMainFilter('press', this)">プレスリリース</button>
      </div>
    </div>


    <!-- 日付・都道府県検索 -->
    <div class="date-search">
      <span class="date-search-label">日付</span>
      <div class="date-input-wrap">
        <input type="date" class="date-input" id="dateFrom" onchange="applyFilters()">
        <span class="date-sep">〜</span>
        <input type="date" class="date-input" id="dateTo" onchange="applyFilters()">
        <button class="date-clear-btn" onclick="clearDates()">クリア</button>
      </div>
      <span class="date-search-label" style="margin-left:1rem;">都道府県</span>
      <select class="pref-select" id="prefSelect" onchange="applyFilters()"><option value="all">すべて</option><option value="オンライン">オンライン</option><option value="北海道">北海道</option><option value="青森県">青森県</option><option value="岩手県">岩手県</option><option value="宮城県">宮城県</option><option value="秋田県">秋田県</option><option value="山形県">山形県</option><option value="福島県">福島県</option><option value="茨城県">茨城県</option><option value="栃木県">栃木県</option><option value="群馬県">群馬県</option><option value="埼玉県">埼玉県</option><option value="千葉県">千葉県</option><option value="東京都">東京都</option><option value="神奈川県">神奈川県</option><option value="新潟県">新潟県</option><option value="富山県">富山県</option><option value="石川県">石川県</option><option value="福井県">福井県</option><option value="山梨県">山梨県</option><option value="長野県">長野県</option><option value="岐阜県">岐阜県</option><option value="静岡県">静岡県</option><option value="愛知県">愛知県</option><option value="三重県">三重県</option><option value="滋賀県">滋賀県</option><option value="京都府">京都府</option><option value="大阪府">大阪府</option><option value="兵庫県">兵庫県</option><option value="奈良県">奈良県</option><option value="和歌山県">和歌山県</option><option value="鳥取県">鳥取県</option><option value="島根県">島根県</option><option value="岡山県">岡山県</option><option value="広島県">広島県</option><option value="山口県">山口県</option><option value="徳島県">徳島県</option><option value="香川県">香川県</option><option value="愛媛県">愛媛県</option><option value="高知県">高知県</option><option value="福岡県">福岡県</option><option value="佐賀県">佐賀県</option><option value="長崎県">長崎県</option><option value="熊本県">熊本県</option><option value="大分県">大分県</option><option value="宮崎県">宮崎県</option><option value="鹿児島県">鹿児島県</option><option value="沖縄県">沖縄県</option></select>
    </div>


    </div><!-- /filter-bar-wrap -->


    <div class="events-list-wrap">
    <!-- イベント一覧 -->
    <div class="events-list" id="eventList"></div>
    </div><!-- /events-list-wrap -->


  </div>


  <!-- 右カラム（サイドカテゴリ） -->
  <div class="right-col">
    <div class="side-section">
      <p class="side-label">テーマで絞込</p>
      <button class="side-btn active" data-side="all" onclick="setSideFilter('all', this)">すべてのテーマ</button>
      <button class="side-btn" data-side="機能不全家族" onclick="setSideFilter('機能不全家族', this)">機能不全家族</button>
      <button class="side-btn" data-side="ヤングケアラー" onclick="setSideFilter('ヤングケアラー', this)">ヤングケアラー</button>
      <button class="side-btn" data-side="アダルトチルドレン" onclick="setSideFilter('アダルトチルドレン', this)">アダルトチルドレン</button>
      <button class="side-btn" data-side="きょうだい児" onclick="setSideFilter('きょうだい児', this)">きょうだい児</button>
      <button class="side-btn" data-side="虐待" onclick="setSideFilter('虐待', this)">虐待</button>
      <button class="side-btn" data-side="ACE" onclick="setSideFilter('ACE', this)">ACE</button>
      <button class="side-btn" data-side="宗教2世" onclick="setSideFilter('宗教2世', this)">宗教2世</button>
      <button class="side-btn" data-side="障害" onclick="setSideFilter('障害', this)">障害</button>
      <button class="side-btn" data-side="家族問題" onclick="setSideFilter('家族問題', this)">家族問題</button>
      <button class="side-btn" data-side="子育ての悩み" onclick="setSideFilter('子育ての悩み', this)">子育ての悩み</button>
      <button class="side-btn" data-side="社会的養護" onclick="setSideFilter('社会的養護', this)">社会的養護</button>
      <button class="side-btn" data-side="里親" onclick="setSideFilter('里親', this)">里親</button>
    </div>
  </div>


</div>






<script>

<!-- JavaScript -->
// =============================================================
// ★★★ イベントを追加・編集するのはここだけ！★★★
//
// tags に使える値（カテゴリ）:
//   "free"      → 無料
//   "online"    → オンライン
//   "offline"   → 会場参加
//   "supporter" → 支援者向け
//   "person"    → 当事者向け
//   "forum"     → フォーラム
//   "toujisya"  → 当事者会
//   "crowd"     → クラウドファンディング
//   "press"     → プレスリリース
//
// sideCategories に使える値（テーマ）:
//   "機能不全家族" / "ヤングケアラー" / "アダルトチルドレン" / "きょうだい児"
//   "虐待" / "ACE" / "宗教2世" / "障害" / "家族問題" / "子育ての悩み"
//   "社会的養護" / "里親"
//
// prefecture に使える値:
//   都道府県名（例: "東京都" / "大阪府" / "北海道"）
//   オンラインの場合は "オンライン"
//
// image: サムネイル画像のURL（16:9推奨）。省略するとグレーのプレースホルダーになります
// detailUrl: 「詳細はこちら」のリンク先URL。省略すると表示されません
// image: サムネイル画像URL。省略すると空欄になります
// =============================================================


const EVENTS = [


  {
    date: "2025/03/08",
    title: "家族関係の悩みを話す会 ── 親との距離の置き方",
    description: "家族関係に悩む方が集まり、支援員のファシリテートのもとで気持ちを整理する場です。解決策を押しつけるのではなく、聴き合うことを大切にしています。",
    time: "19:00〜20:30",
    location: "Zoom（要申込）",
    organizer: "○○市 福祉課",
    price: "無料",
    tags: ["online", "free", "person"],
    sideCategories: ["家族問題"],
    prefecture: "オンライン",
    detailUrl: "https://www.yahoo.co.jp/",
    image: "https://storage.googleapis.com/studio-design-asset-files/projects/brqENNL8a4/s-300x226_webp_c3dd1bcb-c173-478e-8371-241e14d9fb26.jpg",
  },


  {
    date: "2025/03/15",
    title: "ダイアローグ体験会 ── 「言えなかった言葉」を声にする",
    description: "対話の専門家が場を整える中で、家族に言えなかった気持ちを安全に言語化する体験型ワークショップ。少人数制（定員8名）。",
    time: "13:00〜16:00",
    location: "東京都新宿区（詳細は申込後）",
    organizer: "",
    price: "3,000円",
    tags: ["offline", "person"],
    sideCategories: ["機能不全家族", "アダルトチルドレン"],
    prefecture: "東京都",
    detailUrl: "https://www.yahoo.co.jp/",
    image: "https://storage.googleapis.com/studio-design-asset-files/projects/brqENNL8a4/s-300x226_webp_c3dd1bcb-c173-478e-8371-241e14d9fb26.jpg",
  },


  {
    date: "2025/03/22",
    title: "親との絶縁を考えている人のためのQ&Aセミナー",
    description: "「絶縁したいけど、法的に手続きはいるの？」「親が家に来たらどうすれば？」など、実務的な疑問に社会福祉士・行政書士がリアルタイムで答えます。",
    time: "20:00〜21:30",
    location: "YouTube Live（申込不要）",
    organizer: "",
    price: "無料",
    tags: ["online", "free", "person"],
    sideCategories: ["家族問題", "虐待"],
    prefecture: "オンライン",
    detailUrl: "https://www.yahoo.co.jp/",
    image: "https://storage.googleapis.com/studio-design-asset-files/projects/brqENNL8a4/s-300x226_webp_c3dd1bcb-c173-478e-8371-241e14d9fb26.jpg",
  },


  {
    date: "2025/04/05",
    title: "家族関係相談フェア ── 専門家に無料で話す1日",
    description: "複数の専門相談窓口が一堂に集まる相談イベント。社会福祉士・精神保健福祉士・弁護士など、自分に合った専門家と30分の個別面談ができます。",
    time: "10:00〜17:00",
    location: "大阪市立 男女共同参画センター",
    organizer: "大阪府",
    price: "無料",
    tags: ["offline", "free", "forum"],
    sideCategories: ["家族問題", "ヤングケアラー"],
    prefecture: "大阪府",
    detailUrl: "https://www.yahoo.co.jp/",
    image: "https://storage.googleapis.com/studio-design-asset-files/projects/brqENNL8a4/s-300x226_webp_c3dd1bcb-c173-478e-8371-241e14d9fb26.jpg",
  },


  {
    date: "2025/04/19",
    title: "書いて癒す ── ドキュメンタリーライティング入門",
    description: "自分の物語を書くことで過去の家族体験を再構築するワークショップ。参加者は匿名で、書いた内容をシェアするかどうかも自由です。",
    time: "19:30〜21:00",
    location: "Zoom",
    organizer: "",
    price: "2,500円",
    tags: ["online", "person"],
    sideCategories: ["アダルトチルドレン", "ACE"],
    prefecture: "オンライン",
    detailUrl: "https://www.yahoo.co.jp/",
    image: "https://storage.googleapis.com/studio-design-asset-files/projects/brqENNL8a4/s-300x226_webp_c3dd1bcb-c173-478e-8371-241e14d9fb26.jpg",
  },


  {
    date: "2025/04/19",
    title: "書いて癒す ── ドキュメンタリーライティング入門",
    description: "自分の物語を書くことで過去の家族体験を再構築するワークショップ。参加者は匿名で、書いた内容をシェアするかどうかも自由です。",
    time: "19:30〜21:00",
    location: "Zoom",
    organizer: "",
    price: "2,500円",
    tags: ["online", "person"],
    sideCategories: ["アダルトチルドレン", "ACE"],
    prefecture: "オンライン",
    detailUrl: "https://www.yahoo.co.jp/",
    image: "https://storage.googleapis.com/studio-design-asset-files/projects/brqENNL8a4/s-300x226_webp_c3dd1bcb-c173-478e-8371-241e14d9fb26.jpg",
  },


  {
    date: "2025/04/19",
    title: "書いて癒す ── ドキュメンタリーライティング入門",
    description: "自分の物語を書くことで過去の家族体験を再構築するワークショップ。参加者は匿名で、書いた内容をシェアするかどうかも自由です。",
    time: "19:30〜21:00",
    location: "Zoom",
    organizer: "",
    price: "2,500円",
    tags: ["online", "person"],
    sideCategories: ["アダルトチルドレン", "ACE"],
    prefecture: "オンライン",
    detailUrl: "https://www.yahoo.co.jp/",
    image: "https://storage.googleapis.com/studio-design-asset-files/projects/brqENNL8a4/s-300x226_webp_c3dd1bcb-c173-478e-8371-241e14d9fb26.jpg",
  },


  {
    date: "2025/04/19",
    title: "書いて癒す ── ドキュメンタリーライティング入門",
    description: "自分の物語を書くことで過去の家族体験を再構築するワークショップ。参加者は匿名で、書いた内容をシェアするかどうかも自由です。",
    time: "19:30〜21:00",
    location: "Zoom",
    organizer: "",
    price: "2,500円",
    tags: ["online", "person"],
    sideCategories: ["アダルトチルドレン", "ACE"],
    prefecture: "オンライン",
    detailUrl: "https://www.yahoo.co.jp/",
    image: "https://storage.googleapis.com/studio-design-asset-files/projects/brqENNL8a4/s-300x226_webp_c3dd1bcb-c173-478e-8371-241e14d9fb26.jpg",
  },


  {
    date: "2025/04/19",
    title: "書いて癒す ── ドキュメンタリーライティング入門",
    description: "自分の物語を書くことで過去の家族体験を再構築するワークショップ。参加者は匿名で、書いた内容をシェアするかどうかも自由です。",
    time: "19:30〜21:00",
    location: "Zoom",
    organizer: "",
    price: "2,500円",
    tags: ["online", "person"],
    sideCategories: ["アダルトチルドレン", "ACE"],
    prefecture: "オンライン",
    detailUrl: "https://www.yahoo.co.jp/",
    image: "https://storage.googleapis.com/studio-design-asset-files/projects/brqENNL8a4/s-300x226_webp_c3dd1bcb-c173-478e-8371-241e14d9fb26.jpg",
  },


  {
    date: "2025/04/19",
    title: "書いて癒す ── ドキュメンタリーライティング入門",
    description: "自分の物語を書くことで過去の家族体験を再構築するワークショップ。参加者は匿名で、書いた内容をシェアするかどうかも自由です。",
    time: "19:30〜21:00",
    location: "Zoom",
    organizer: "",
    price: "2,500円",
    tags: ["online", "person"],
    sideCategories: ["アダルトチルドレン", "ACE"],
    prefecture: "オンライン",
    detailUrl: "https://www.yahoo.co.jp/",
    image: "https://storage.googleapis.com/studio-design-asset-files/projects/brqENNL8a4/s-300x226_webp_c3dd1bcb-c173-478e-8371-241e14d9fb26.jpg",
  },

];


// =============================================================
// ここより下は触らなくてOKです
// =============================================================


const MONTHS = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
const PAGE_SIZE = 5;


const TAG_DEFS = {
  free: ['tag-free',      '無料'],
  online: ['tag-online',    'オンライン'],
  offline: ['tag-offline',   '会場参加'],
  supporter: ['tag-supporter', '支援者向け'],
  person: ['tag-person',    '当事者向け'],
  forum: ['tag-forum',     'フォーラム'],
  toujisya: ['tag-toujisya',  '当事者会'],
  press: ['tag-press',     'プレスリリース'],
};


let currentMainFilter = 'all';
let currentSideFilter = 'all';
let currentDateFrom   = '';
let currentDateTo     = '';
let currentPref       = 'all';
let currentFiltered   = [...EVENTS];
let shownCount        = PAGE_SIZE;


function parseDate(str) {
  const p = str.replace(/-/g, '/').split('/');
  return {
    year: p[0] || '',
    month: MONTHS[parseInt(p[1], 10) - 1] || '',
    monthNum: parseInt(p[1], 10) || '',
    day: (p[2] || '').replace(/^0/, ''),
  };
}


function setMainFilter(val, btn) {
  currentMainFilter = val;
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  applyFilters();
}


function setSideFilter(val, btn) {
  currentSideFilter = val;
  document.querySelectorAll('.side-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  applyFilters();
}


function clearDates() {
  document.getElementById('dateFrom').value = '';
  document.getElementById('dateTo').value   = '';
  currentDateFrom = '';
  currentDateTo   = '';
  applyFilters();
}


function applyFilters() {
  currentDateFrom = document.getElementById('dateFrom').value;
  currentDateTo   = document.getElementById('dateTo').value;
  currentPref     = document.getElementById('prefSelect').value;
  shownCount      = PAGE_SIZE;


  currentFiltered = EVENTS.filter(ev => {
    if (currentMainFilter !== 'all' && !(ev.tags || []).includes(currentMainFilter)) return false;
    if (currentSideFilter !== 'all' && !(ev.sideCategories || []).includes(currentSideFilter)) return false;
    if (currentPref !== 'all' && ev.prefecture !== currentPref) return false;
    if (currentDateFrom) {
      const evDate = ev.date.replace(/\//g, '-');
      if (evDate < currentDateFrom) return false;
    }
    if (currentDateTo) {
      const evDate = ev.date.replace(/\//g, '-');
      if (evDate > currentDateTo) return false;
    }
    return true;
  });


  render();
}


function loadMore() {
  shownCount += PAGE_SIZE;
  render();
}


const iconClock = `<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`;
const iconPin   = `<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/><circle cx="12" cy="9" r="2.5"/></svg>`;
const iconOrg   = `<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="1"/><path d="M16 7V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"/></svg>`;
const iconPrice = `<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v2m0 8v2M9 10a3 3 0 0 1 6 0c0 2-3 3-3 5m0 0h.01"/></svg>`;
const iconArrow = `<svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>`;


function buildCard(ev) {
  const d = parseDate(ev.date);


  const mainTagsHTML = (ev.tags || []).map(t => {
    const [cls, label] = TAG_DEFS[t] || [];
    return cls ? `<span class="tag ${cls}">${label}</span>` : '';
  }).join('');


  const sideTagsHTML = (ev.sideCategories || []).map(s =>
    `<span class="tag tag-side-${s}">${s}</span>`
  ).join('');


  const titleHTML = ev.url
    ? `<a href="${ev.url}" target="_blank" rel="noopener">${ev.title}</a>`
    : ev.title;


  const metaHTML = [
    ev.time      ? `<span>${iconClock}${ev.time}</span>` : '',
    ev.location  ? `<span>${iconPin}${ev.location}</span>` : '',
    ev.organizer ? `<span>${iconOrg}${ev.organizer}</span>` : '',
    ev.price     ? `<span>${iconPrice}${ev.price}</span>` : '',
  ].filter(Boolean).join('');


  const detailHTML = ev.detailUrl
    ? `<a href="${ev.detailUrl}" target="_blank" rel="noopener" class="ev-detail-link">詳細はこちら ${iconArrow}</a>`
    : '';


  const thumbHTML = ev.image
    ? `<div class="ev-thumbnail-wrap"><img src="${ev.image}" alt="${ev.title}" loading="lazy"></div>`
    : `<div class="ev-thumbnail-wrap"></div>`;


  return `
    <article class="event-row">
      <div class="ev-body">
        <div class="ev-date-body">${d.year}年${d.monthNum}月${d.day}日</div>
        <div class="ev-tags">${mainTagsHTML}${sideTagsHTML}</div>
        <h2 class="ev-title">${titleHTML}</h2>
        <p class="ev-desc">${ev.description}</p>
        <div class="ev-meta">${metaHTML}</div>
        ${detailHTML}
      </div>
      ${thumbHTML}
    </article>`;
}


function render() {
  const list = document.getElementById('eventList');
  if (!currentFiltered.length) {
    list.innerHTML = '<p class="no-results">該当するイベントはありません</p>';
    return;
  }


  const visible = currentFiltered.slice(0, shownCount);
  const remaining = currentFiltered.length - shownCount;
  const moreBtn = remaining > 0
    ? `<div class="load-more-wrap"><button class="load-more-btn" onclick="loadMore()">もっと見る（残り ${remaining} 件）</button></div>`
    : '';


  list.innerHTML = visible.map(ev => buildCard(ev)).join('') + moreBtn;
}


// 初期表示
render();
</script>
